<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°°ë“œë¯¼í„´ ë¶„ì„ ë§ˆìŠ¤í„°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #000; color: #fff; font-family: sans-serif; }
        .neon-green { color: #39ff14; }
        .card { background-color: #111; border: 1px solid #333; border-radius: 12px; padding: 20px; margin-bottom: 20px; }
        input, select, textarea { background: #222; border: 1px solid #444; color: #fff; padding: 10px; border-radius: 8px; width: 100%; margin-bottom: 12px; }
        button { cursor: pointer; transition: 0.2s; font-weight: bold; }
        button:active { transform: scale(0.96); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body class="p-4 pb-24">
    <div class="max-w-md mx-auto">
        <h1 class="text-2xl font-bold text-center mb-6 neon-green italic text-shadow">ğŸ¸ PRO ANALYTICS</h1>

        <div class="flex justify-around mb-6 text-xs border-b border-gray-800 pb-2">
            <button onclick="openTab('p-tab')" class="hover:neon-green">í”„ë¡œí•„ë“±ë¡</button>
            <button onclick="openTab('r-tab')" class="hover:neon-green">ê²½ê¸°ê¸°ë¡</button>
            <button onclick="openTab('s-tab')" class="hover:neon-green">ë¶„ì„/ìˆœìœ„</button>
        </div>

        <div id="p-tab" class="tab-content active">
            <div class="card">
                <h2 class="text-lg font-bold mb-4 neon-green">ğŸ‘¤ ì„ ìˆ˜ ìƒì„¸ í”„ë¡œí•„</h2>
                <input type="text" id="p_name" placeholder="ì´ë¦„ (í•„ìˆ˜)">
                <input type="number" id="p_age" placeholder="ë‚˜ì´">
                <input type="text" id="p_career" placeholder="êµ¬ë ¥ (ì˜ˆ: 2ë…„)">
                <select id="p_hand">
                    <option value="ì˜¤ë¥¸ì†">í¬í•¸ë“œ: ì˜¤ë¥¸ì†</option>
                    <option value="ì™¼ì†">í¬í•¸ë“œ: ì™¼ì†</option>
                </select>
                <select id="p_back">
                    <option value="ì›í•¸ë“œ">ë°±í•¸ë“œ: ì›í•¸ë“œ</option>
                    <option value="íˆ¬í•¸ë“œ">ë°±í•¸ë“œ: íˆ¬í•¸ë“œ</option>
                </select>
                <select id="p_style">
                    <option value="ê³µê²©í˜•">ìŠ¤íƒ€ì¼: ê³µê²©í˜•</option>
                    <option value="ìˆ˜ë¹„í˜•">ìŠ¤íƒ€ì¼: ìˆ˜ë¹„í˜•</option>
                    <option value="ì˜¬ë¼ìš´ë“œ">ìŠ¤íƒ€ì¼: ì˜¬ë¼ìš´ë“œ</option>
                    <option value="ë„¤íŠ¸í”Œë ˆì´">ìŠ¤íƒ€ì¼: ë„¤íŠ¸í”Œë ˆì´</option>
                    <option value="ë² ì´ìŠ¤ë¼ì¸">ìŠ¤íƒ€ì¼: ë² ì´ìŠ¤ë¼ì¸</option>
                </select>
                <button onclick="savePlayer()" class="w-full bg-[#39ff14] text-black py-3 rounded-lg">ì„ ìˆ˜ ì €ì¥</button>
            </div>
            <div id="playerList" class="mt-4 space-y-2 text-xs text-gray-500"></div>
        </div>

        <div id="r-tab" class="tab-content">
            <div class="card">
                <h2 class="text-lg font-bold mb-4 neon-green">ğŸ“ ê²½ê¸° ë¶„ì„ ê¸°ë¡</h2>
                <input type="date" id="m_date">
                <select id="m_type"><option value="ë‹¨ì‹">ë‹¨ì‹</option><option value="ë³µì‹">ë³µì‹</option></select>
                <select id="m_me"><option value="">ë‚´ ì´ë¦„ ì„ íƒ</option></select>
                <select id="m_partner"><option value="ì—†ìŒ">íŒŒíŠ¸ë„ˆ ì„ íƒ (ë³µì‹ ì „ìš©)</option></select>
                <input type="text" id="m_enemy" placeholder="ìƒëŒ€ ì„ ìˆ˜ ì´ë¦„">
                <textarea id="m_note" placeholder="ìƒëŒ€ íŠ¹ì§• (ì˜ˆ: ë“œë¼ì´ë¸Œê°€ ì¢‹ìŒ, ë°±í•¸ë“œ ì‹¤ìˆ˜ ë§ìŒ)"></textarea>
                <div class="flex gap-2">
                    <button onclick="saveMatch('ìŠ¹')" class="flex-1 bg-blue-600 py-3 rounded-lg">ìŠ¹ë¦¬</button>
                    <button onclick="saveMatch('íŒ¨')" class="flex-1 bg-red-600 py-3 rounded-lg">íŒ¨ë°°</button>
                </div>
            </div>
        </div>

        <div id="s-tab" class="tab-content">
            <div class="card mb-4">
                <h2 class="text-sm font-bold mb-4 neon-green italic text-center">ğŸ† ì¢…í•© ìˆœìœ„ (ìŠ¹ë¥ )</h2>
                <div id="rankingList" class="space-y-2 text-sm"></div>
            </div>
            <div class="card">
                <h2 class="text-sm font-bold mb-4 neon-green italic text-center">ğŸ¤ íŒŒíŠ¸ë„ˆë³„ ìŠ¹ë¥ </h2>
                <div id="partnerRanking" class="space-y-2 text-xs text-gray-400"></div>
            </div>
        </div>
    </div>

    <script>
        let players = JSON.parse(localStorage.getItem('m_players')) || [];
        let matches = JSON.parse(localStorage.getItem('m_matches')) || [];

        function openTab(id) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            render();
        }

        function savePlayer() {
            const p = {
                name: document.getElementById('p_name').value,
                age: document.getElementById('p_age').value,
                career: document.getElementById('p_career').value,
                hand: document.getElementById('p_hand').value,
                back: document.getElementById('p_back').value,
                style: document.getElementById('p_style').value
            };
            if(!p.name) return alert("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”!");
            players.push(p);
            localStorage.setItem('m_players', JSON.stringify(players));
            alert("ì €ì¥ ì™„ë£Œ!");
            render();
        }

        function saveMatch(res) {
            const m = {
                date: document.getElementById('m_date').value || new Date().toLocaleDateString(),
                type: document.getElementById('m_type').value,
                me: document.getElementById('m_me').value,
                partner: document.getElementById('m_partner').value,
                enemy: document.getElementById('m_enemy').value,
                note: document.getElementById('m_note').value,
                res: res
            };
            if(!m.me || !m.enemy) return alert("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”!");
            matches.unshift(m);
            localStorage.setItem('m_matches', JSON.stringify(matches));
            alert("ê¸°ë¡ ì™„ë£Œ!");
            render();
        }

        function render() {
            const opts = players.map(p => `<option value="${p.name}">${p.name}</option>`).join('');
            document.getElementById('m_me').innerHTML = `<option value="">ë‚´ ì´ë¦„ ì„ íƒ</option>` + opts;
            document.getElementById('m_partner').innerHTML = `<option value="ì—†ìŒ">ì—†ìŒ(ë‹¨ì‹)</option>` + opts;
            
            document.getElementById('playerList').innerHTML = players.map(p => `<div>${p.name} (${p.style})</div>`).join('');

            const stats = {};
            players.forEach(p => stats[p.name] = {w:0, t:0});
            matches.forEach(m => {
                if(stats[m.me]) { stats[m.me].t++; if(m.res==='ìŠ¹') stats[m.me].w++; }
                if(m.partner!=='ì—†ìŒ' && stats[m.partner]) { stats[m.partner].t++; if(m.res==='ìŠ¹') stats[m.partner].w++; }
            });

            const rank = Object.keys(stats).map(n => ({
                n, r: stats[n].t ? ((stats[n].w/stats[n].t)*100).toFixed(1) : 0, ...stats[n]
            })).sort((a,b) => b.r - a.r);

            document.getElementById('rankingList').innerHTML = rank.map((s,i) => `
                <div class="flex justify-between border-b border-gray-900 pb-1">
                    <span>${i+1}. ${s.n}</span>
                    <span class="neon-green">${s.r}% <span class="text-[10px] text-gray-600">(${s.w}ìŠ¹/${s.t}ì „)</span></span>
                </div>
            `).join('');

            const pairs = {};
            matches.filter(m => m.type === 'ë³µì‹' && m.partner !== 'ì—†ìŒ').forEach(m => {
                const k = [m.me, m.partner].sort().join(" + ");
                if(!pairs[k]) pairs[k] = {w:0, t:0};
                pairs[k].t++; if(m.res==='ìŠ¹') pairs[k].w++;
            });

            document.getElementById('partnerRanking').innerHTML = Object.keys(pairs).map(k => `
                <div class="flex justify-between"><span>${k}</span><span>${((pairs[k].w/pairs[k].t)*100).toFixed(1)}%</span></div>
            `).join('');
        }
        render();
    </script>
</body>
</html>
